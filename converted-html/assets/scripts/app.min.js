$(window).load(function(){function o(){$("#contact-wrap2").css("top",$(window).height()-topMenu),2*topMenu>=$(window).height()?$("#wrapper").css("marginBottom","0"):$("#wrapper").css("marginBottom",topMenu)}function t(o){mobile||($(".current").removeClass("current"),$(o).addClass("current"))}function e(){projectOpen&&(description=$("#description"),fixedLimitStart=project.offset().top-170,fixedLimitEnd=project.offset().top+project.height()-description.height()-193,descriptionTop=project.height()-description.height()-25)}function i(){project=$(".project"),projectOpen&&(description=$("#description"),fixedLimitStart=project.offset().top-100,fixedLimitEnd=project.offset().top+project.height()-description.height()-123,descriptionTop=project.height()-description.height()-25)}function n(o){$("html,body").animate({scrollTop:$("#project").offset().top-100},400),$(".loader").fadeIn(400),$("#project").animate({minHeight:1e3},400),$("#project").fadeOut(800,function(){$.ajax({url:o,type:"GET",async:!1,success:function(o){$("#project").html($(o).find("#project").children(".project"))},complete:function(){projectOpen=!0,$(".loader").fadeOut(400),$("#project").fadeIn(400,function(){i()})}})})}function r(o){1==$("#project").hasClass("first")?(console.log("test de premier chargement"),$("#project").removeClass("first")):n(o)}$("body").show(),mobile=!1,topMenu=300,decalMobile=70,decalProject=0,loaderMidle=($(window).width()-$("#loader").width())/2,$(window).scrollTop(topMenu),o(),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/webOS/i)||null!=navigator.userAgent.match(/Android/i))&&(mobile=!0,decalMobile=0,$(".current").removeClass("current")),$(".about-link").click(function(){return $("html,body").animate({scrollTop:topMenu},800),t(".about-link"),!1}),$(".skills-link").click(function(){return $("html,body").animate({scrollTop:$("#skills").offset().top-decalMobile},800),t(".skills-link"),!1}),$(".book-link").click(function(){return $("html,body").animate({scrollTop:$(".item").offset().top-(decalMobile+200-decalProject)},800),t(".book-link"),!1}),$(".contact-link").click(function(){return $("html,body").animate({scrollTop:0},800),t(".contact-link"),!1}),projectOpen=!1,description=$("#description"),fixedLimitStart="",fixedLimitEnd="",descriptionTop="",project=$(".project"),$(window).trigger("scroll"),$(window).scroll(function(){windowScroll=$(window).scrollTop(),mobile||(windowScroll>=30+topMenu?$("#header-wrap2").show():$("#header-wrap2").hide()),topMenu-1>=windowScroll?t(".contact-link"):windowScroll>=topMenu&&$("#skills").offset().top-80>=windowScroll?t(".about-link"):windowScroll>=$("#skills").offset().top-80&&$("#book").offset().top-110>=windowScroll?t(".skills-link"):windowScroll>=$("#book").offset().top-110&&t(".book-link"),projectOpen&&!mobile&&(windowScroll>=fixedLimitStart&&fixedLimitEnd>=windowScroll?(description.addClass("description-fixed"),description.css("top","100px")):(description.removeClass("description-fixed"),windowScroll>=fixedLimitEnd?description.css("top",descriptionTop):description.css("top","0"))),console.log(fixedLimitStart+" --- "+fixedLimitEnd)}),mobile?($("#loader").css("top","100px"),$("#loader").css("left",loaderMidle)):$(document).mousemove(function(o){$("#loader").css("top",o.pageY+10-$("html,body").scrollTop()),$("#loader").css("left",o.pageX+10)}),document.body.onresize=function(){e(),console.log("fixedLimitStart = "+fixedLimitStart),o(),loaderMidle=($(window).width()-$("#loader").width())/2,$("#loader").css("left",loaderMidle)},mobile&&$(".item").removeClass("no-touch"),window.location.pathname,document.location.href.indexOf("projects")>-1&&(projectOpen=!0,$(window).scrollTop($(".project").offset().top-170),e());var c=$(".ajax");c.click(function(o){o.preventDefault();var t="../"+$(this).attr("href"),e=t.split("/");if("projects"!=e[1])var t="../projects/"+$(this).attr("href");history.pushState(null,null,t),r(t)}),window.onpopstate=function(){r("../"+window.location.pathname)}});

function dribbble(){console.log("load shot"),$.ajax({url:"http://api.dribbble.com/players/mickaelmarquez/shots",type:"GET",async:!1,cache:!0,dataType:"jsonp",contentType:"application/json; charset=utf-8",jsonp:"callback",jsonpCallback:"jsonpCallback",success:function(o){console.log(o);for(var e=0;2>=e;e++){var t=o.shots[e].image_url,i=o.shots[e].short_url;console.log("img = "+t),$("#dribbble").children(".dribbble-item:eq("+e+")").children(".item-img").css("background-image","url("+t+")"),$("#dribbble").children(".dribbble-item:eq("+e+")").attr("href",i)}},complete:function(){$("#dribbble").fadeIn(600)}})}$(window).load(function(){function o(){$("#contact-wrap2").css("top",$(window).height()-topMenu),2*topMenu>=$(window).height()?$("#wrapper").css("marginBottom","0"):$("#wrapper").css("marginBottom",topMenu)}function e(o){mobile||($(".current").removeClass("current"),$(o).addClass("current"))}function t(){projectOpen&&(description=$("#description"),fixedLimitStart=project.offset().top-128,fixedLimitEnd=project.offset().top+project.height()-description.height()-151,descriptionTop=project.height()-description.height()-25)}function i(){project=$(".project"),projectOpen&&(description=$("#description"),fixedLimitStart=project.offset().top-100,fixedLimitEnd=project.offset().top+project.height()-description.height()-123,descriptionTop=project.height()-description.height()-25)}function n(o){"/"!=o?($("html,body").animate({scrollTop:$("#project").offset().top-100},400),$("#page-loader").fadeIn(400),$("#project").animate({minHeight:1e3},400),$("#project").fadeOut(800,function(){$.ajax({url:o,type:"GET",async:!1,cache:!0,success:function(o){$("#project").html($(o).find("#project").children(".project"))},complete:function(){projectOpen=!0,$("#page-loader").fadeOut(400),$("#project").fadeIn(400,function(){i(),setTimeout(function(){i(),console.log("reCalcFixedDescription")},1e3),setTimeout(function(){i(),console.log("reCalcFixedDescription")},2e3)})}})})):($("html,body").animate({scrollTop:300},400),$("#project").animate({minHeight:0},400),$(".project").fadeOut(200))}function c(o){1==$("#project").hasClass("first")?(console.log("test de premier chargement"),$("#project").removeClass("first")):n(o)}$("#wrap").show(),$("#site-loader").fadeOut(400),mobile=!1,topMenu=300,decalMobile=70,decalProject=0,loaderMidle=($(window).width()-$("#loader").width())/2,$(window).scrollTop(topMenu),o(),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/webOS/i)||null!=navigator.userAgent.match(/Android/i))&&(mobile=!0,decalMobile=0,$(".current").removeClass("current")),$(".about-link").click(function(){return $("html,body").animate({scrollTop:topMenu},800),e(".about-link"),!1}),$(".skills-link").click(function(){return $("html,body").animate({scrollTop:$("#skills").offset().top-decalMobile},800),e(".skills-link"),!1}),$(".book-link").click(function(){return $("html,body").animate({scrollTop:$(".item").offset().top-(decalMobile+200-decalProject)},800),e(".book-link"),!1}),$(".contact-link").click(function(){return $("html,body").animate({scrollTop:0},800),e(".contact-link"),!1}),projectOpen=!1,description=$("#description"),fixedLimitStart="",fixedLimitEnd="",descriptionTop="",project=$(".project"),$(window).trigger("scroll"),$(window).scroll(function(){windowScroll=$(window).scrollTop(),mobile||(windowScroll>=30+topMenu?$("#header-wrap2").show():$("#header-wrap2").hide()),topMenu-1>=windowScroll?e(".contact-link"):windowScroll>=topMenu&&$("#skills").offset().top-80>=windowScroll?e(".about-link"):windowScroll>=$("#skills").offset().top-80&&$("#book").offset().top-110>=windowScroll?e(".skills-link"):windowScroll>=$("#book").offset().top-110&&e(".book-link"),projectOpen&&!mobile&&(windowScroll>=fixedLimitStart&&fixedLimitEnd>=windowScroll?(description.addClass("description-fixed"),description.css("top","100px")):(description.removeClass("description-fixed"),windowScroll>=fixedLimitEnd?description.css("top",descriptionTop):description.css("top","0"))),console.log(fixedLimitStart+" --- "+fixedLimitEnd)}),mobile?($("#loader").css("top","100px"),$("#loader").css("left",loaderMidle)):$(document).mousemove(function(o){$("#loader").css("top",o.pageY+10-$("html,body").scrollTop()),$("#loader").css("left",o.pageX+10)}),document.body.onresize=function(){t(),console.log("fixedLimitStart = "+fixedLimitStart),o(),loaderMidle=($(window).width()-$("#loader").width())/2,$("#loader").css("left",loaderMidle)},mobile&&$(".item").removeClass("no-touch"),window.location.pathname,document.location.href.indexOf("projects")>-1&&(projectOpen=!0,$(window).scrollTop($(".project").offset().top-128),t());var r=$(".ajax");r.click(function(o){o.preventDefault();var e=$(this).attr("href");history.pushState(null,null,e),c(e)}),window.onpopstate=function(){c(window.location.pathname)}}),dribbble();
